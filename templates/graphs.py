import json
import plotly
import pandas as pd
import plotly.express as px

data = [(1592222400, 0.98685133, 0.096899227),
        (1592223000, 0.98662138, 4.591812153), (1592223300, 0.96646297, 0.006921373),
        (1592223600, 0.98499072, 0.006921373), (1592223900, 0.96094453, 0.006921373),
        (1592224200, 0.98195291, 0.04152824), (1592224500, 0.98385948, 3.924799303),
        (1592224800, 0.98159546, 0.33222591), (1592225100, 0.97766727, 8.677810133),
        (1592225400, 0.99159193, 4.91836238), (1592225700, 0.98135531, 5.228993653),
        (1592226000, 0.98488134, 4.778446837), (1592226300, 0.98762041, 5.078765233),
        (1592226600, 0.98919958, 4.802393793), (1592226900, 0.97895449, 3.89929406),
        (1592227200, 0.97654259, 4.210755743), (1592227500, 0.97721457, 3.917151153),
        (1592227800, 0.97594351, 3.91254841), (1592228100, 0.9783054, 3.87634961),
        (1592228400, 0.96950352, 4.673933983), (1592228700, 0.97830588, 6.180959343),
        (1592229000, 0.97565013, 4.01913754), (1592229300, 0.98548186, 8.849667787),
        (1592229600, 0.98371595, 6.34541132), (1592229900, 0.98741961, 4.571082473),
        (1592230200, 0.98369753, 4.747127633), (1592230500, 0.98748195, 9.32164033),
        (1592230800, 0.98930836, 7.500588557), (1592231100, 0.97523832, 11.01180116),
        (1592231400, 0.97614735, 8.700788973), (1592231700, 0.97837943, 4.36423723),
        (1592232000, 0.98252869, 4.592296523), (1592232300, 0.98259896, 4.36351053),
        (1592232600, 0.98268479, 4.871677797), (1592232900, 0.98219377, 4.896110217),
        (1592233200, 0.98200792, 4.756725987), (1592233500, 0.98682934, 9.564576367),
        (1592233800, 0.9844225, 4.585132917), (1592234100, 0.98418075, 4.548368017),
        (1592234400, 0.98573929, 4.67092335), (1592234700, 0.97932923, 5.791770637),
        (1592235000, 0.97745401, 3.76771872), (1592235300, 0.97496951, 3.171684723),
        (1592235600, 0.97252506, 3.358388783), (1592235900, 0.97354096, 3.537631153),
        (1592236200, 0.97512001, 3.736883867), (1592236500, 0.97805452, 3.806547657),
        (1592236800, 0.97061098, 3.88399768), (1592237100, 0.95938367, 7.118125083)]

#randomN = [random.randint(0, 10) for _ in range(6)]

unixtime = []
pft3 = []
thdprom = []

for row in data:
    unixtime.append(row[0])
    pft3.append(row[1])
    thdprom.append(row[2])

def giveGraph():
    df = pd.DataFrame({
        'unixtime': unixtime,
        'pft3': pft3,
        'thdprom': thdprom,
    })
    df = df.sort_values(by="unixtime")
    df['unixtime'] = pd.to_datetime(df['unixtime'], unit='s')

    fig = px.line(df, x='unixtime', y='pft3')
    #fig.show()
    #fig = px.line(df, x='unixtime', y=['pft3', 'thdprom'])
    #fig = px.line(df, x='unixtime', y='thdprom')
    #fig.show()

    dat = json.dumps(fig, cls=plotly.utils.PlotlyJSONEncoder)
    return dat


#giveGraph()
